DROP DATABASE QLCHG;
CREATE DATABASE QLCHG;
USE QLCHG;

DROP TABLE IF EXISTS TRANGTHAI;
CREATE TABLE TRANGTHAI(
ID INT PRIMARY KEY IDENTITY,
TRANGTHAI NVARCHAR(50) DEFAULT NULL
);

DROP TABLE IF EXISTS LOAI;
CREATE TABLE LOAI(
ID INT PRIMARY KEY IDENTITY,
LOAI NVARCHAR(50) UNIQUE DEFAULT NULL,
TRANGTHAI NVARCHAR(50) DEFAULT NULL
);

SELECT TRANGTHAI.TRANGTHAI FROM TRANGTHAI WHERE TRANGTHAI.TRANGTHAI = N'Hoạt động' OR TRANGTHAI.TRANGTHAI = N'Không hoạt động'

DROP TABLE IF EXISTS SIZE;
CREATE TABLE SIZE(
ID INT PRIMARY KEY IDENTITY, 
SIZE DECIMAL(20,1) UNIQUE DEFAULT 0,
TRANGTHAI NVARCHAR(50) DEFAULT NULL
);

DROP TABLE IF EXISTS HANG;
CREATE TABLE HANG(
ID INT PRIMARY KEY IDENTITY, 
HANG NVARCHAR(50) UNIQUE DEFAULT NULL,
TRANGTHAI NVARCHAR(50) DEFAULT NULL
);
drop table TAIKHOAN
CREATE TABLE TAIKHOAN (
	MATK VARCHAR(10) PRIMARY KEY,
	USERNAME NVARCHAR(20),
	PASSWORD NVARCHAR(20),
	TRANGTHAI BIT
)

CREATE TABLE NHANVIEN(
	MANV VARCHAR(10) PRIMARY KEY ,
	MATK VARCHAR(10),
	HOTEN NVARCHAR(50),
	GIOITINH INT,
	DIACHI NVARCHAR(50),
	SĐT VARCHAR(10),
	TRANGTHAI BIT,
	FOREIGN KEY (MATK) REFERENCES TAIKHOAN(MATK)
)
drop table khachhang
create table KHACHHANG (
	MaKH varchar(10) primary key,
	HoTen nvarchar(50),
	NgaySinh date,
	SĐT varchar(10),
	GioiTinh int,
	DiaChi nvarchar(100),
)

DROP TABLE IF EXISTS SANPHAM;
CREATE TABLE SANPHAM(
ID INT PRIMARY KEY IDENTITY,
MASP NVARCHAR(50) UNIQUE DEFAULT NULL,
TENSP NVARCHAR(50) DEFAULT NULL
);

DROP TABLE IF EXISTS THONGTINSANPHAM;
CREATE TABLE THONGTINSANPHAM(
ID INT PRIMARY KEY IDENTITY,
MASP NVARCHAR(50) UNIQUE DEFAULT NULL,
ANH NVARCHAR(50) DEFAULT NULL,
MOTA NVARCHAR(255) DEFAULT NULL,
DONGIA DECIMAL(20,0) DEFAULT 0,
SOLUONG INT DEFAULT NULL,
LOAI NVARCHAR(50) DEFAULT NULL,
SIZE DECIMAL(20,1) DEFAULT NULL,
HANG NVARCHAR(50) DEFAULT NULL,
TRANGTHAI NVARCHAR(50) DEFAULT NULL,
CONSTRAINT FK1 FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP),
CONSTRAINT FK2 FOREIGN KEY (LOAI) REFERENCES LOAI(LOAI),
CONSTRAINT FK3 FOREIGN KEY (SIZE) REFERENCES SIZE(SIZE),
CONSTRAINT FK4 FOREIGN KEY (HANG) REFERENCES HANG(HANG)
);

DROP TABLE IF EXISTS HOADON;
CREATE TABLE HOADON(
ID INT PRIMARY KEY IDENTITY,
MAHD NVARCHAR(100) UNIQUE DEFAULT NULL,
SDT VARCHAR(50) DEFAULT NULL,
MaKH varchar(10) DEFAULT NULL,
NGAYTAO DATE DEFAULT NULL,
DIACHI NVARCHAR(255) DEFAULT NULL,
GIASHIP DECIMAL(20,0) DEFAULT NULL,
MANV VARCHAR(10) DEFAULT NULL,
THANHTIEN DECIMAL(20,0) DEFAULT NULL,
MOTA NVARCHAR(225) DEFAULT NULL,
TRANGTHAI NVARCHAR(50) DEFAULT NULL,
CACHTHUC BIT DEFAULT NULL,
CONSTRAINT FK6 FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV),
CONSTRAINT FK7 FOREIGN KEY (MaKH) REFERENCES KHACHHANG(MAKH)
);

DROP TABLE IF EXISTS HDCHITIET;
CREATE TABLE HDCHITIET(
ID INT PRIMARY KEY IDENTITY,
SOLUONG INT DEFAULT 0,
DONGIA DECIMAL(20,0) DEFAULT 0,
MAHD NVARCHAR(100) DEFAULT NULL,
MASP NVARCHAR(50) DEFAULT NULL,
TRANGTHAI NVARCHAR(50) DEFAULT NULL,
CONSTRAINT FK8 FOREIGN KEY (MAHD) REFERENCES HOADON(MAHD),
CONSTRAINT FK9 FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP)
);

INSERT INTO TAIKHOAN VALUES ('TK000','test','1',1)
INSERT INTO TAIKHOAN VALUES ('TK001','ngocdd','123456',1)
INSERT INTO NHANVIEN VALUES ('NGOCDD','TK001',N'Đặng Đình Ngọc',1,'Hà Nội','0369999999',1)
INSERT INTO KHACHHANG VALUES ('KH001','NGUYỄN VĂN A','1998-4-4','0999999999',1,'Hà Nội')


DBCC CHECKIDENT (TRANGTHAI, RESEED, 0);
INSERT TRANGTHAI(TRANGTHAI)
VALUES (N'Hoạt động'),
(N'Không hoạt động'),
(N'Tại quầy'),
(N'Đã hủy'),
(N'Chờ xử lý'),
(N'Đã thanh toán'),
(N'Đang giao hàng'),
(N'Chưa thanh toán');
SELECT * FROM TRANGTHAI WHERE TRANGTHAI = N'Chờ xử lý' OR TRANGTHAI = N'Đã thanh toán'  OR TRANGTHAI = N'Đang giao hàng';
DELETE FROM TRANGTHAI;

DBCC CHECKIDENT (HANG, RESEED, 0);
INSERT INTO HANG(HANG, TRANGTHAI)
VALUES ('Nike', N'Hoạt động'),
('Balenciaga', N'Hoạt động'),
('Adidas', N'Hoạt động'),
('Puma', N'Hoạt động'),
('Vans', N'Hoạt động'),
('Fila', N'Hoạt động'),
('Converse', N'Hoạt động'),
('New Blance', N'Hoạt động'),
('Bitis', N'Hoạt động');
SELECT * FROM HANG;
DELETE FROM HANG;

DBCC CHECKIDENT (LOAI, RESEED, 0);
INSERT INTO LOAI(LOAI, TRANGTHAI)
VALUES ('Custom Shoes', N'Hoạt động'),
('Sneaker', N'Hoạt động'),
('Running Shoes', N'Hoạt động'),
('Basketball Shoes', N'Hoạt động'),
('Football Shoes', N'Hoạt động'),
('Gym & Training Shoes', N'Hoạt động'),
('Lifestyle Shoes', N'Hoạt động');
SELECT * FROM LOAI;
DELETE FROM LOAI;

DBCC CHECKIDENT (SIZE, RESEED, 0);
INSERT INTO SIZE(SIZE, TRANGTHAI)
VALUES (35.5, N'Hoạt động'),(36, N'Hoạt động'),(36.5, N'Hoạt động'),
(38, N'Hoạt động'),(38.5, N'Hoạt động'),(39, N'Hoạt động'),
(40, N'Hoạt động'),(40.5, N'Hoạt động'),(41, N'Hoạt động')
SELECT * FROM SIZE;
DELETE FROM SIZE;

DBCC CHECKIDENT (SANPHAM, RESEED, 0);
INSERT INTO SANPHAM (MASP, TENSP)
VALUES ('SP001', 'Air Jordan 1 Mid Fearless Blue'),
('SP002', 'Adidas Yeezy Boost Black 350 V2 – Supreme'),
('SP003', 'Fila Cozy i7 Custom'),
('SP004', 'Bitis Air Zoom Alphafly Green NEXT%'),
('SP005', 'Nike Jordan Retro Low White Black'),
('SP006', 'Vans Retro Low White Black'),
('SP007', 'Balenciaga Tripple S Black')
SELECT * FROM SANPHAM;
DELETE FROM SANPHAM;

DBCC CHECKIDENT (THONGTINSANPHAM, RESEED, 0);
INSERT INTO THONGTINSANPHAM(MASP, ANH, MOTA, DONGIA, SOLUONG, LOAI, SIZE, HANG, TRANGTHAI)
VALUES ('SP001', 'Air Jordan 1 Mid Fearless Blue.jpg', 'N/A', 3500000, 20, 'Sneaker', '36', 'Nike', N'Hoạt động'),
('SP002', 'Adidas Yeezy Boost Black 350 V2 – Supreme.jpg', 'N/A', 6500000, 20, 'Sneaker', '36.0', 'Adidas', N'Hoạt động'),
('SP003', 'Fila Cozy i7 Custom.jpg', 'N/A', 5500000, 20, 'Sneaker', '35.5', 'Fila', N'Hoạt động'),
('SP004', 'Bitis Air Zoom Alphafly Green NEXT%.jpg', 'N/A', 8500000, 20, 'Sneaker', '38.5', 'Bitis', N'Hoạt động'),
('SP005', 'Nike Jordan Retro Low White Black.jpg', 'N/A', 5500000, 20, 'Sneaker', '38.0', 'Nike', N'Hoạt động'),
('SP006', 'Vans Retro Low White Black.jpg', 'N/A', 9500000, 20, 'Sneaker', '35.5', 'Vans', N'Hoạt động'),
('SP007', 'Balenciaga Tripple S Black.jpg', 'N/A', 5500000, 20, 'Sneaker', '40', 'Balenciaga', N'Hoạt động')
SELECT * FROM THONGTINSANPHAM;
DELETE FROM THONGTINSANPHAM;

DBCC CHECKIDENT (HOADON, RESEED, 0);
INSERT INTO HOADON (MAHD, SDT, MaKH, NGAYTAO, DIACHI, GIASHIP, MANV, THANHTIEN, MOTA, TRANGTHAI, CACHTHUC)
VALUES ('HD001', '0674556944', 'KH001', '2021-10-28', N'HÀ NỘI', 15000, 'NGOCDD', 3500000, 'N/A', N'Đã thanh toán', 1),
('HD002', '0988767765', 'KH001', '2021-10-28', N'HÀ NỘI', 15000, 'NGOCDD', 6500000, 'N/A', N'Đã thanh toán', 1),
('HD003', '0898734456', 'KH001', '2021-10-28', N'HÀ NỘI', 15000, 'NGOCDD', 5500000, 'N/A', N'Đã thanh toán', 1),
('HD004', '0786774321','KH001', '2021-10-28', N'HÀ NỘI', 15000, 'NGOCDD', 8500000, 'N/A', N'Đã thanh toán', 1),
('HD005', '0508777554', 'KH001', '2021-10-28', N'HÀ NỘI', 15000, 'NGOCDD', 5500000, 'N/A', N'Đã thanh toán', 1),
('HD006', '0434661276', 'KH001', '2021-10-28', N'HÀ NỘI', 15000, 'NGOCDD', 9500000, 'N/A', N'Đã thanh toán', 1),
('HD007', '0354883409', 'KH001', '2021-10-28', N'HÀ NỘI', 15000, 'NGOCDD', 5500000, 'N/A', N'Đã thanh toán', 1)
DELETE FROM HOADON;

DBCC CHECKIDENT (HDCHITIET, RESEED, 0);
INSERT INTO HDCHITIET (SOLUONG, DONGIA, MAHD, MASP, TRANGTHAI)
VALUES (1, 3500000, 'HD001', 'SP001', N'Đã thanh toán'),
(1, 6500000, 'HD002', 'SP002', N'Đã thanh toán'),
(1, 5500000, 'HD003', 'SP003', N'Đã thanh toán'),
(1, 8500000, 'HD004', 'SP004', N'Đã thanh toán'),
(1, 5500000, 'HD005', 'SP005', N'Đã thanh toán'),
(1, 9500000, 'HD006', 'SP006', N'Đã thanh toán'),
(1, 5500000, 'HD007', 'SP007', N'Đã thanh toán')
SELECT * FROM HDCHITIET;
DELETE FROM HDCHITIET;




